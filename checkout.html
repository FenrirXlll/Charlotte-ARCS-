
<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Finalizar Compra - Charlotte ARCS</title>
  <meta name="description" content="Finaliza tu compra en Charlotte ARCS.">
  
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;500;600;700&display=swap" rel="stylesheet">
  
  <!-- Enlace a la biblioteca de Supabase -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  
  <!-- Estilos CSS -->
  <link rel="stylesheet" href="css/main.css">
  <link rel="stylesheet" href="css/header.css">
  <link rel="stylesheet" href="css/footer.css">
  <link rel="stylesheet" href="css/checkout.css">
</head>
<body>
  <!-- Cabecera (Versión simplificada para checkout) -->
  <header id="main-header" class="checkout-header">
    <div class="container">
      <div class="logo">
        <a href="index.html">
          <h1>Charlotte ARCS</h1>
        </a>
      </div>
      <div class="checkout-steps">
        <div class="step completed">
          <span class="step-number">1</span>
          <span class="step-name">Carrito</span>
        </div>
        <div class="step active">
          <span class="step-number">2</span>
          <span class="step-name">Detalles</span>
        </div>
        <div class="step">
          <span class="step-number">3</span>
          <span class="step-name">Confirmación</span>
        </div>
      </div>
    </div>
  </header>

  <!-- Contenido principal -->
  <main>
    <!-- Contenido del checkout -->
    <section class="checkout-content">
      <div class="container">
        <div class="checkout-layout">
          <!-- Formulario de checkout -->
          <div class="checkout-form-container">
            <h1>Detalles de Envío y Pago</h1>
            
            <!-- Mensaje para usuarios no autenticados -->
            <div id="login-message" class="checkout-message" style="display: none;">
              <p>Ya tienes una cuenta? <a href="login.html?redirect=checkout.html">Inicia sesión</a> para un proceso de pago más rápido.</p>
            </div>
            
            <form id="checkout-form">
              <div class="form-section">
                <h2>Información Personal</h2>
                <div class="form-row">
                  <div class="form-group">
                    <label for="checkout-name">Nombre Completo *</label>
                    <input type="text" id="checkout-name" required>
                  </div>
                  <div class="form-group">
                    <label for="checkout-email">Correo Electrónico *</label>
                    <input type="email" id="checkout-email" required>
                  </div>
                </div>
                <div class="form-row">
                  <div class="form-group">
                    <label for="checkout-phone">Teléfono *</label>
                    <input type="tel" id="checkout-phone" required>
                  </div>
                </div>
              </div>
              
              <div class="form-section">
                <h2>Dirección de Envío</h2>
                <div class="form-group">
                  <label for="checkout-address">Dirección *</label>
                  <input type="text" id="checkout-address" placeholder="Calle, número, colonia" required>
                </div>
                <div class="form-row">
                  <div class="form-group">
                    <label for="checkout-city">Ciudad *</label>
                    <input type="text" id="checkout-city" required>
                  </div>
                  <div class="form-group">
                    <label for="checkout-state">Estado *</label>
                    <input type="text" id="checkout-state" required>
                  </div>
                </div>
                <div class="form-row">
                  <div class="form-group">
                    <label for="checkout-zip">Código Postal *</label>
                    <input type="text" id="checkout-zip" required>
                  </div>
                  <div class="form-group">
                    <label for="checkout-country">País *</label>
                    <select id="checkout-country" required>
                      <option value="MX">México</option>
                      <option value="US">Estados Unidos</option>
                      <option value="CA">Canadá</option>
                      <option value="ES">España</option>
                      <option value="CO">Colombia</option>
                      <option value="AR">Argentina</option>
                      <option value="CL">Chile</option>
                      <option value="PE">Perú</option>
                    </select>
                  </div>
                </div>
                <div class="form-group">
                  <label for="checkout-notes">Notas adicionales (opcional)</label>
                  <textarea id="checkout-notes"></textarea>
                </div>
              </div>
              
              <div class="form-section">
                <h2>Método de Pago</h2>
                <div class="payment-methods">
                  <div class="payment-method">
                    <input type="radio" name="payment-method" id="payment-card" value="card" checked>
                    <label for="payment-card">Tarjeta de Crédito/Débito</label>
                  </div>
                  <div class="payment-method">
                    <input type="radio" name="payment-method" id="payment-paypal" value="paypal">
                    <label for="payment-paypal">PayPal</label>
                  </div>
                  <div class="payment-method">
                    <input type="radio" name="payment-method" id="payment-transfer" value="transfer">
                    <label for="payment-transfer">Transferencia Bancaria</label>
                  </div>
                </div>
                
                <!-- Campos para tarjeta de crédito -->
                <div id="card-payment-fields" class="payment-fields">
                  <div class="form-group">
                    <label for="card-name">Nombre en la Tarjeta *</label>
                    <input type="text" id="card-name" required>
                  </div>
                  <div class="form-group">
                    <label for="card-number">Número de Tarjeta *</label>
                    <input type="text" id="card-number" placeholder="XXXX XXXX XXXX XXXX" required>
                  </div>
                  <div class="form-row">
                    <div class="form-group">
                      <label for="card-expiry">Fecha de Expiración *</label>
                      <input type="text" id="card-expiry" placeholder="MM/AA" required>
                    </div>
                    <div class="form-group">
                      <label for="card-cvc">CVC/CVV *</label>
                      <input type="text" id="card-cvc" placeholder="123" required>
                    </div>
                  </div>
                </div>
                
                <!-- Campo para PayPal -->
                <div id="paypal-payment-fields" class="payment-fields" style="display: none;">
                  <p>Serás redirigido a PayPal para completar tu pago una vez que confirmes el pedido.</p>
                </div>
                
                <!-- Campos para transferencia bancaria -->
                <div id="transfer-payment-fields" class="payment-fields" style="display: none;">
                  <div class="bank-info">
                    <p>Por favor, realiza una transferencia a la siguiente cuenta bancaria:</p>
                    <p><strong>Banco:</strong> BBVA</p>
                    <p><strong>Titular:</strong> Charlotte ARCS S.A. de C.V.</p>
                    <p><strong>Cuenta:</strong> 0123456789</p>
                    <p><strong>CLABE:</strong> 012345678901234567</p>
                  </div>
                  <div class="form-group">
                    <label for="transfer-reference">Referencia de pago *</label>
                    <input type="text" id="transfer-reference" placeholder="Número de transferencia o comprobante">
                  </div>
                </div>
              </div>
              
              <div class="form-actions">
                <a href="cart.html" class="btn outline-btn">Volver al Carrito</a>
                <button type="submit" class="btn primary-btn">Confirmar Pedido</button>
              </div>
            </form>
          </div>
          
          <!-- Resumen del pedido -->
          <div class="order-summary">
            <h2>Resumen del Pedido</h2>
            <div id="checkout-items">
              <!-- Productos en el pedido -->
              <p>Cargando productos...</p>
            </div>
            <div class="summary-totals">
              <div class="summary-line">
                <span>Subtotal</span>
                <span id="checkout-subtotal">$0.00</span>
              </div>
              <div class="summary-line">
                <span>Envío</span>
                <span id="checkout-shipping">$0.00</span>
              </div>
              <div class="summary-line total">
                <span>Total</span>
                <span id="checkout-total">$0.00</span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>
  </main>

  <!-- Pie de página simplificado -->
  <footer class="checkout-footer">
    <div class="container">
      <div class="footer-bottom">
        <p>&copy; 2025 Charlotte ARCS. Todos los derechos reservados.</p>
      </div>
    </div>
  </footer>

  <!-- Scripts -->
  <script src="js/supabase.js"></script>
  <script src="js/auth.js"></script>
  <script src="js/checkout.js"></script>
</body>
</html>
